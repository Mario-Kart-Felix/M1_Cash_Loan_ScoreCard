

LIBNAME TT "E:\´ßÊÕM1ÆÀ·Ö¿¨";
OPTIONS COMPRESS=YES;
%LET INDATA=train_origion;
%LET OUTDATA=RES;

DATA DATA_ELT;
	SET &INDATA.;
RUN;


DATA &OUTDATA.;
SET DATA_ELT;

IF MAX_CPD >26      THEN WOE_MAX_CPD = 1.32105613;	
ELSE IF MAX_CPD >18 THEN WOE_MAX_CPD = 0.654005595;	
ELSE IF MAX_CPD >12 THEN WOE_MAX_CPD = 0.059001208;	
ELSE IF MAX_CPD >7  THEN WOE_MAX_CPD = -0.301674114;	
ELSE  WOE_MAX_CPD = -0.599483128;	
			
IF MAX_OVERDUE >550 THEN WOE_MAX_OVERDUE = 0.726192138;		
ELSE IF MAX_OVERDUE >350 THEN WOE_MAX_OVERDUE = 0.036745071;	
ELSE IF MAX_OVERDUE >200 THEN WOE_MAX_OVERDUE = -0.343644789;	
ELSE  WOE_MAX_OVERDUE = -0.582466109;	
	
		
IF FINISH_PERIODS_RATIO <=0.2 THEN WOE_FINISH_PERIODS_RATIO = 0.142275404;	
ELSE IF FINISH_PERIODS_RATIO <=0.35 THEN WOE_FINISH_PERIODS_RATIO = 0.070033215;
ELSE IF FINISH_PERIODS_RATIO >0.35 THEN WOE_FINISH_PERIODS_RATIO = -0.193530303;	
ELSE  WOE_FINISH_PERIODS_RATIO = 0.142275404;	/*DEFAULT GROUP: HIGHEST RISK*/
		
		
IF PTP_RATIO =.     THEN WOE_PTP_RATIO = -0.407348214;	
ELSE IF PTP_RATIO <=0.25 THEN WOE_PTP_RATIO = 0.705209873;	
ELSE IF PTP_RATIO <=0.35 THEN WOE_PTP_RATIO = 0.507046074;	
ELSE IF PTP_RATIO <=0.65 THEN WOE_PTP_RATIO = 0.188292021;	
ELSE IF PTP_RATIO <=0.8 THEN WOE_PTP_RATIO = -0.304710214;	
ELSE IF PTP_RATIO >0.8 THEN WOE_PTP_RATIO = -0.546894009;	
ELSE  WOE_PTP_RATIO = -0.407348214;	/*DEFAULT GROUP: MISSING GROUP*/	
		
IF BPTP_RATIO =.    THEN WOE_BPTP_RATIO = -0.194410206;	
ELSE IF BPTP_RATIO >0.6 THEN WOE_BPTP_RATIO = 1.277294675;	
ELSE IF BPTP_RATIO >0.4 THEN WOE_BPTP_RATIO = 0.561864795;	
ELSE IF BPTP_RATIO >0.2 THEN WOE_BPTP_RATIO = 0.014434958;	
ELSE IF BPTP_RATIO <=0.2 THEN WOE_BPTP_RATIO = -0.449018278;	
ELSE  WOE_BPTP_RATIO = -0.194410206;	/*DEFAULT GROUP: MISSING GROUP*/
		

IF PERSON_SEX =1    THEN WOE_PERSON_SEX = 0.152556782;	
ELSE  WOE_PERSON_SEX = -0.465344807;   /*DEFAULT GROUP: HIGHEST RISK*/	
		
		
IF FAMILY_STATE =1  THEN WOE_FAMILY_STATE = 0.074189092;	
ELSE IF FAMILY_STATE =2 THEN WOE_FAMILY_STATE = -0.17314257;	
ELSE IF FAMILY_STATE =3 THEN WOE_FAMILY_STATE = 0.210845987;	
ELSE  WOE_FAMILY_STATE = 0.074189092;   /*DEFAULT GROUP: Î´»é*/	
		
		
IF OTHER_PERSON_TYPE =6 THEN WOE_OTHER_PERSON_TYPE = 0.082781487;	
ELSE  WOE_OTHER_PERSON_TYPE = -0.28464343;   /*DEFAULT GROUP: HIGHEST RISK*/	
		
IF EDUCATION =5 OR EDUCATION = 6 THEN WOE_EDUCATION = -0.372603794;	
ELSE  WOE_EDUCATION = 0.052148143;   /*DEFAULT GROUP: HIGHEST RISK*/	
			
IF PUTOUT_SAGROUP =. THEN WOE_PUTOUT_SAGROUP = 0.018696189;	
ELSE IF PUTOUT_SAGROUP =0 THEN WOE_PUTOUT_SAGROUP = 0.018696189;	
ELSE IF PUTOUT_SAGROUP =1 THEN WOE_PUTOUT_SAGROUP = 0.60547148;	
ELSE IF PUTOUT_SAGROUP =2 THEN WOE_PUTOUT_SAGROUP = 0.291294977;	
ELSE IF PUTOUT_SAGROUP =3 THEN WOE_PUTOUT_SAGROUP = 0.018696189;	
ELSE IF PUTOUT_SAGROUP =4 THEN WOE_PUTOUT_SAGROUP = 0.018696189;	
ELSE IF PUTOUT_SAGROUP =5 THEN WOE_PUTOUT_SAGROUP = -0.216562341;
ELSE  WOE_PUTOUT_SAGROUP = 0.018696189;   /*DEFAULT GROUP: SA_GROUP = 3*/	


IF DK_RATIO <0.7 THEN WOE_DK_RATIO = -0.472294557;
ELSE IF DK_RATIO < 0.8 THEN WOE_DK_RATIO = 0.402352912;
ELSE WOE_DK_RATIO = 0.882649693;	

INTERCEPT = -2.0709;
RAW_SCORE = INTERCEPT 
		   + WOE_BPTP_RATIO * 0.2071
		   + WOE_FAMILY_STATE * 0.4609
		   + WOE_FINISH_PERIODS_RATIO * 2.3217
		   + WOE_MAX_CPD * 0.7214
		   + WOE_MAX_OVERDUE * 0.3904
		   + WOE_PERSON_SEX * 0.7330
		   + WOE_PTP_RATIO * 0.2081
		   + WOE_OTHER_PERSON_TYPE * 0.8903
		   + WOE_EDUCATION * 0.9362
		   + WOE_PUTOUT_SAGROUP * 0.8228
		   + WOE_DK_RATIO * 0.2821;

P_1 = EXP(RAW_SCORE)/(1+EXP(RAW_SCORE));
SCORE = 504.426833730083 - 72.1347520444482 * LOG(F_SCORE/(1-F_SCORE));
RUN;
